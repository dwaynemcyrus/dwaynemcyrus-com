---
// File: ./src/pages/projects/[...slug].astro
import { getCollection, render } from 'astro:content';

import BaseLayout from '../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
	const posts = await getCollection('projects');
	return posts.map(post => ({
		params: { slug: post.id }, props: { post },
	}));
}

const { post } = Astro.props;
const { Content } = await render(post);
const { title, description, summary } = post.data;
---
<BaseLayout title={title} description={description ?? summary}>
	<main slot="main">
		<article>
			<Content />
		</article>
	</main>

	<!-- TODO add a tool to pull in the posts from the dev log that tag this project as notes -->
</BaseLayout>
